# Day 03

## Part 1

> Calculate how many houses Santa visits.

```js
const input = '>^>v<^v^v^v^v^v'

const visitedLocations = [...input].reduce(
  (locations, instruction) => {
    let [x, y] = locations[locations.length - 1].split(',')

    if (instruction === '^') y++
    else if (instruction === 'v') y--
    else if (instruction === '>') x++
    else if (instruction === '<') x--
    else throw new Error('How eggnogged are you, elf?!')

    locations.push([x, y].toString())
    return locations
  },
  ['0,0']
)

const uniqueLocations = new Set(visitedLocations)

console.log(uniqueLocations.size)
```

[_Try it out on flems.io_](https://flems.io/#0=N4IgzgpgNhDGAuEAmIBc4D2UCu8CWGAdgHQBWYIANCAGZ4wWoDaohAhgLYRoh6EAOuMhWqwiiQvB5jCYeAAI+ghQF55AcgBuAPk0AeTYb0HNAPX07Du43tN27x0ye2ndr9y88mj7x9pvmhjoetmb+Ti7uQU5Wng7a-p5BCYEueokxHq4mga7+tvk6GQW6VkXWtumV+rqRZg7mdgnhSekRcY3+Fs3pFuYuNV7Bvb4D9vUJRrbZMVbuTnn2dmYGpelu+o0RlbmJib2lZoYOVd75nQa9xwVBYYsrR5vmB9cJl44rVZuV4U15wW4DjsDPMfBEjoF1pNnm9lqUmkdrLEiiDEXMooUIZD+pVLmFjg58W4mr8QSUdCYQaDoQ1+v1wj8KstgstgX1Urs3F03sYBitwSdLiEuiT7KEnnlpiyHp1CWlnk4AiDAfE-vkUhTYatpv8Ac4lo1klUFrUIV4GdkKj43mM6TYxmlUTUZaljCtmjFSrUUiVKc0kR7LHsgtNzq1AkYKUZfltXEdelKekj-iKUjElTVE27sgEfG0uvoAoGBl6YZZtSm4gyzTDjb5bqqERDgvVWyLGdVvVMirdnOtZdDPn73oG3XUwgc4-kbH5loqSdEqjbWX3WU1nGFByLNlyE5OcfbQvSIoq0oXJryGbn5UHIyO47jAQ3vWPLqbBwTmvzHIqvoD3gm8R4nKU7WB0Gq8vUeR8qEqxTpa9RtFs1y+Oss7lDYtzqkK8aLucfbNlODzHC01SalyYpvPy8SFps5T-DmhwtLU2relOvK8iezKphMcSwU84plHBFHVkalpugmE6ZLaM4zCa-aFvOZQXgssR4uW3Qwg+AyYWmGHJHciLjN4KJxtcBJWPazpniheLigu1FSUs3w7pMNZwV8qk9I0Elvi2qJ6RJ55uRqPpFoeC5tFhUGRPWYnPM6R60eM6b9IhfFpX0eZAgUdbnqGUVpPhJxrJEfjTm5AKtjm8HypBNzNlcY6RhScYnscDwlFuPyQcRm7RN6vwtUJJqROO3k1D5IwgT6no6WKLaeEiRSZJe0GrJ8c3zuCsECtKJl8kx-JUcyRa9mmIxLt8YHaZG9IWNUc4dZZCI2vK7T1rqiKrFWmocR1N10VBSE-jCXTAgs2Txm1hzSvWOpha8dYldsljugUNHtCxsO3n8bohl6TJIT5ey-g9-p-uTHTMiV0z4z8aNvkqAEJrNS0bbC7SHp5zzGvxcnBbJT4neDBk+RS6yZh5b0IWl9XEuqF5QkkVGXl6wyUZpUoRmZZ4FnMvWFvqJopkbnGchrqIYrUtbyqaARwr+hxbEtRFIcGrSgzKakWl8d2hT4illIqt4OrzhoaY6qZgeDHyG7M3icRZLSPNmoM-CVUt6kVQVNm0QpnMpUpoYa+yq4zPStmhXU6iG9OwZe+P+mbfbcoh9l+qWUWNqkiGZpHOmDJkssIqyL0bOCSKhtYNMSpCpyLCHJww7FvxjMM6mYQj9z57VPlipCrX-MJnTFsvqK4oppLo5YS-bFClJLljyVzmTik7Ej5yQxRb4bKc0p1RDLfeiCxlTz3vPsSeF53SmVfgqWY9h7YXUSMMSaFMbYtlwopSUaDCQYzOMUB+HEyoSS5JHRBURIKE10nKR+ExFgpw-pzZa64MjYTIXWZcxcQ5UWnCcIGYMoQPgGqjGYHw6KGmmrfDGJEeQbHdBcC+0jgwXHkcDS+EkLZ0nTDaHsJ4bZyO+mlSuFZQyRhaCbHE4MVxXk6nlAGox1avzBCdV0aUQ6hEOApdUvN8zii-sqWiMESw9Adp4yGOxF4sjgebbs65TLEO0sSKIc4ArlFCvMbwhIyZUJjNgn6oCxEBXpu0IMtZhIdQ5p2Yod1jIkh-O+TWtp4QuLYVAqKzUvApT7EeMhyioytXLNuBUk0+gcQKVGMqztHSbl9O1OyEYF4PB5B5T0mC5anSyT9K4D5JLJBtutdCKJokz2jEbM26TIYIjpm3ZM8J7YpIOExdcEY3qOh0TSUWKQUHa1fEVWEiINR4S3imcW7wl4AypmM-6kp5xjQ2keG4MzAQoteB4Qyk1TyA08vsJut97kzn8hkWYxJgZPG3GhCwwxK50TWsGK2X56ozjjrXWCxIlQflWREhqFpfEzB3HslJhzk64g+mFbM0ZJghKeSiF88Txx011uVf6fJBlmU3NsVCW5zwMIEqeMeDYGhISGdy2+Os6T+x2rKbURsEpUkLrRaRBdx5yTpva3CSwkgKPzA0CWDVe5aX3syCcLo-LbFNBIiC3E5grPtZaS0Md-Icl8EvQcxc8xrx7pSbBcRrSiXdAS-FHJ2UQRUiWcy5K9ZfjKHqXxdQ-4pRCKGOaOo8F3i4rtEK69Bj5h9NEopb5ayLibMfLCxTsT9xaoDLFnz54hnlacBtvp0QWOwpGnqhNvnpwHHjKGpJ4j7BRJxOo+cxylm+aUp4Zz3YJWcvnYBsUEXiPjQUgNfhJZQVehUe9UxIG0tGK89i9MI3vA1m1DWnxojzPwcS-sqlQFSyhtNCevqPiu09ZhfqUNuLTV2lSQoySYzTk4o4SWEqbEks5ljI6UJGpwtPCteFNVEJ7VKv6Co7Yh67NPa1c4aN0GXRxEOTxSLYquWPo+fZYMDxJT-IszSQFrhXAeq-axEihSrxtsqHOfsrgOhmYmB6+zF0mX-fCqOvNOXGtLki74OxSxXwYtmUl2T9J+ulaLHcPbtFmwjjOSBTCfzCYKnnFyM9D3KZJXcMTpHQul12IiwCUQdUcTaqR7Ge4XlwgwX0DUQEhb72bdaaqrMNqZT+ldKlRl5iatXlV50Rn6mJrarsfShLPGZo9VBfZaxJTKpNhjaEGcblZJPEQy2+U4VmMxRSvMdcV7lCDujD08Hvk8nfi9Xt9IYyYaCodRdlEEGX3hT7b5BsPoFXxRtP6SYgtxwrksnS71rX8owSXWMimP3sieWFcI-H4VLh1MCcJ8qKZ4mSWRjN3XjQviurlB+Wmzu+Pva1-KqcHrK1KrvNGHitike1qE-5Nce3uz4c5X7sN+YmxanuXKzd+TlnarNU+sH7q9RMnp2Wp7D4GvHmHX8i93q4jJCuJT4wow5FJXBVSNcmrw6xAlKq4m-L0VCddJ2UcryIIVkbd8Kn-mqoCV8PmVXBrwjtfJfy6kpVm3VNGIH0CzhklkSKLGQFVvOHramlkYxnVWPZXj92vFZKJjhI67iaXuh6bPGCjEExbhR70wnnsaY1kTDPZ+-jdF-QhDuNbgE3JFaHxY9BG0pGs5dIBs3Picx8SIpDueIev7S64ppObVi+S-gpvpRdPrv8HTljdcIhigfy08WbQRGBfN66M9kuB9cyMyvQSNGxp6fhqpdz9yQ8leObG9a3Sgi8MfGIJHUAAHUIFQcA0A4D4CIIwEAABGVAAAGEAABfSgrBODcHQGALAuABAJA5AV+MgEgUg6AMgcg8gmgeAYAeAiASAAAMhgLAGwHfrIPIGoEwMQLgUoLgAALrEAABOyA2AsAEAAAFBfvIPIJQVAKgegUAWAJQIoLIPAMQeQRgQAJRYHaDyDAA0G0HyAwAKBMAAAerBAAngQVgSIYwRgWAEwAwWgYocQDAIQAAObwAAAW8gAAtPII-kQWAPwFAAgZQeoJQOoNwRfkIbQXgDQHQXwHIJwQgEAVgSoGoOoKYDYfIFIQANQBH2HyDQCQCKBOGUEuEcFcEeFeHeGaB+FSH6H6EhFhEQARHOHsFuEYGeHeHaB+HiFBFpFQDhGOFZGuGxFEB5EaB6CFEpElHhG6HEEYAADu8ghAEA7RAAosQS0cQZYQABJtGhGaGaGEAYBjHIDyBsCkH+EYDYCsHQA0AAD8AAhDYXYYQMIfIaocwcQIIGADoZQRIdIUQfABgAAMocF8CaGUHcG2HbHCGkHwDYDEHbEqFMH35CGf5CFMDqAv6UAv7qAEEX6PEX5QEKDYCEB4AACO2AEAKBex9+chnR7RlxEA8AlBsB8BiBSJXxsg4JhAUBWAEA6hkxlB0JcJCJ+Jah8BAAXhAI8VfpADAO4ffjwI-gAByoAADMvJH+BB7+QAA)

I'm taking advantage of
[`Array.prototype.toString()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/toString)
which turns e.g. `[2, 3]` into `'2,3'`.

## Part 2

> Santa and Robo-Santa team up together
> and take instructions in turn.

Only slight modifications were needed:

```js
const visitedLocations = [...input]
  .reduce(
    (allLocations, instruction, i) => {
      const locations = allLocations[i % 2]
      let [x, y] = locations[locations.length - 1].split(',')

      if (instruction === '^') y++
      else if (instruction === 'v') y--
      else if (instruction === '>') x++
      else if (instruction === '<') x--
      else throw new Error('How eggnogged are you, elf?!')

      locations.push([x, y].toString())

      return allLocations
    },
    [['0,0'], ['0,0']]
  )
  .flat()

const uniqueLocations = new Set(visitedLocations)

console.log(uniqueLocations.size)
```

[_flems_](https://flems.io/#0=N4IgzgpgNhDGAuEAmIBc4D2UCu8CWGAdgHQBWYIANCAGZ4wWoDaohAhgLYRoh6EAOuMhWqwiiQvB5jCYeAAI+ghQF55AcgBuAPk0AeTYb0HNAPX07Du43tN27x0ye2ndr9y88mj7x9pvmhjoetmb+Ti7uQU5Wng7a-p5BCYEueokxHq4mga7+tvk6GQW6VkXWtumV+rqRZg7mdgnhSekRcY3+Fs3pFuYuNV7Bvb4D9vUJRrbZMVbuTnn2dmYGpelu+o0RlbmJib2lZoYOVd75nQa9xwVBYYsrR5vmB9cJl44rVZuV4U15wW4DjsDPMfBEjoF1pNnm9lqUmkdrLEiiDEXMooUIZD+pVLmFjg58W4mr8QSUdCYQaDoQ1+v1wj8KstgstgX1Urs3F03sYBitwSdLiEuiT7KEnnlpiyHp1CWlnk4AiDAfE-vkUhTYatpv8Ac4lo1klUFrUIV4GdkKj43mM6TYxmlUTUZaljCtmjFSrUUiVKc0kR7LHsgtNzq1AkYKUZfltXEdelKekj-iKUjElTVE27sgEfG0uvoAoGBl6YZZtSm4gyzTDjb5bqqERDgvVWyLGdVvVMirdnOtZdDPn73oG3XUwgc4-kbH5loqSdEqjbWX3WU1nGFByLNlyE5OcfbQvSIoq0oXJryGbn5UHIyO47jAQ3vWPLqbBwTmvzHIqvoD3gm8R4nKU7WB0Gq8vUeR8qEqxTpa9RtFs1y+Oss7lDYtzqkK8aLucfbNlODzHC01SalyYpvPy8SFps5T-DmhwtLU2relOvK8iezKphMcSwU84plHBFHVkalpugmE6ZLaM4zCa-aFvOZQXgssR4uW3Qwg+AyYWmGHJHciLjN4KJxtcBJWPazpniheLigu1FSUs3w7pMNZwV8qk9I0Elvi2qJ6RJ55uRqPpFoeC5tFhUGRPWYnPM6R60eM6b9IhfFpX0eZAgUdbnqGUVpPhJxrJEfjTm5AKtjm8HypBNzNlcY6RhScYnscDwlFuPyQcRm7RN6vwtUJJqROO3k1D5IwgT6no6WKLaeEiRSZJe0GrJ8c3zuCsECtKJl8kx-JUcyRa9mmIxLt8YHaZG9IWNUc4dZZCI2vK7T1rqiKrFWmocR1N10VBSE-jCXTAgs2Txm1hzSvWOpha8dYldsljugUNHtCxsO3n8bohl6TJIT5ey-g9-p-uTHTMiV0z4z8aNvkqAEJrNS0bbC7SHp5zzGvxcnBbJT4neDBk+RS6yZh5b0IWl9XEuqF5QkkVGXl6wyUZpUoRmZZ4FnMvWFvqJopkbnGchrqIYrUtbyqaARwr+hxbEtRFIcGrSgzKakWl8d2hT4illIqt4OrzhoaY6qZgeDHyG7M3icRZLSPNmoM-CVUt6kVQVNm0QpnMpUpoYa+yq4zPStmhXU6iG9OwZe+P+mbfbcoh9l+qWUWNqkiGZpHOmDJkssIqyL0bOCSKhtYNMSpCpyLCHJww7FvxjMM6mYQj9z57VPlipCrX-MJnTFsvqK4oppLo5YS-bFClJLljyVzmTik7Ej5yQxRb4bKc0p1RDLfeiCxlTz3vPsSeF53SmVfgqWY9h7YXUSMMSaFMbYtlwopSUaDCQYzOMUB+HEyoSS5JHRBURIKE10nKR+ExFgpw-pzZa64MjYTIXWZcxcQ5UWnCcIGYMoQPgGqjGYHw6KGmmrfDGJEeQbHdBcC+0jgwXHkcDS+EkLZ0nTDaHsJ4bZyO+mlSuFZQyRhaCbHE4MVxXk6nlAGox1avzBCdV0aUQ6hEOApdUvN8zii-sqWiMESw9Adp4yGOxF4sjgebbs65TLEO0sSKIc4ArlFCvMbwhIyZUJjNgn6oCxEBXpu0IMtZhIdQ5p2Yod1jIkh-O+TWtp4QuLYVAqKzUvApT7EeMhyioytXLNuBUk0+gcQKVGMqztHSbl9O1OyEYF4PB5B5T0mC5anSyT9K4D5JLJBtutdCKJokz2jEbM26TIYIjpm3ZM8J7YpIOExdcEY3qOh0TSUWKQUHa1fEVWEiINR4S3imcW7wl4AypmM-6kp5xjQ2keG4MzAQoteB4Qyk1TyA08vsJut97kzn8hkWYxJgZPG3GhCwwxK50TWsGK2X56ozjjrXWCxIlQflWREhqFpfEzB3HslJhzk64g+mFbM0ZJghKeSiF88Txx011uVf6fJBlmU3NsVCW5zwMIEqeMeDYGhISGdy2+Os6T+x2rKbURsEpUkLrRaRBdx5yTpva3CSwkgKPzA0CWDVe5aX3syCcLo-LbFNBIiC3E5grPtZaS0Md-Icl8EvQcxc8xrx7pSbBcRrSiXdAS-FHJ2UQRUiWcy5K9ZfjKHqXxdQ-4pRCKGOaOo8F3i4rtEK69Bj5h9NEopb5ayLibMfLCxTsT9xaoDLFnz54hnlacBtvp0QWOwpGnqhNvnpwHHjKGpJ4j7BRJxOo+cxylm+aUp4Zz3YJWcvnYBsUEXiPjQUgNfhJZQVehUe9UxIG0tGK89i9MI3vA1m1DWnxojzPwcS-sqlQFSyhtNCevqPiu09ZhfqUNuLTV2lSQoySYzTk4o4SWEqbEks5ljI6UJGpwtPCteFNVEJ7VKv6Co7Yh67NPa1c4aN0GXRxEOTxSLYquWPo+fZYMDxJT-IszSQFrhXAeq-axEihSrxtsqHOfsrgOhmYmB6+zF0mX-fCqOvNOXGtLki74OxSxXwYtmUl2T9J+ulaLHcPbtFmwjjOSBTCfzCYKnnFyM9D3KZJXcMTpHQul12IiwCUQdUcTaqR7Ge4XlwgwX0DUQEhb72bdaaqrMNqZT+ldKlRl5iatXlV50Rn6mJrarsfShLPGZo9VBfZaxJTKpNhjaEGcblZJPEQy2+U4VmMxRSvMdcV7lCDujD08Hvk8nfi9Xt9IYyYaCodRdlEEGX3hT7b5BsPoFXxRtP6SYgtxwrksnS71rX8owSXWMimP3sieWFcI-H4VLh1MCcJ8qKZ4mSWRjN3XjQviurlB+Wmzu+Pva1-KqcHrK1KrvNGHitike1qE-5Nce3uz4c5X7sN+YmxanuXKzd+TlnarNU+sH7q9RMnp2Wp7D4GvHmHX8i93q4jJCuJT4wow5FJXBVSNcmrw6xAlKq4m-L0VCddJ2UcryIIVkbd8Kn-mqoCV8PmVXBrwjtfJfy6kpVm3VNGIH0CzhklkSKLGQFVvOHramlkYxnVWPZXj92vFZKJjhI67iaXuh6bPGCjEExbhR70wnnsaY1kTDPZ+-jdF-QhDuNbgE3JFaHxY9BG0pGs5dIBs3Picx8SIpDueIev7S64ppObVi+S-gpvpRdPrv8HTljdcIhigfy08WbQRGBfN66M9kuB9cyMyvQSNGxp6fhqpdz9yQ8leObG9a3Sgi8MfGIJHUAAHUIFQcA0A4D4CIIwEAABGVAAAGEAABfSgrBODcHQGALAuABAJA5AV+MgEgUg6AMgcg8gmgeAYAeAiASAAAMhgLAGwHfrIPIGoEwMQLgUoLgAALoX7yDyDEAABOyA2AsAEAAAFMQSQfIDQWwFAFACgWgRgWAJQIoLIPAGQVQRgVwXgAAJRYHaDyDAD0EMHyBQEKBQCoHoFAFgBYHyDMGsHyEcFMB4DyAACk8gAATEQYQFISQTAAoEwAAB5cEACeBByhch7BihTA9hCh9+xAMAhAAA5vAAABbyAAC08gj+BBxAYA-AUACBNB6glA6gQhF+khDBeANAjBfAcgfBCAQBWBKgag6gpgMR8gVhAA1AUfESQdAJAIoEkTQSkbwfwRkVkdkZoHkVYX4X4SUfIGURABUckTwWkRgZkdkdoHkeYUUW0R0V0VUT0bUUQP0RoHoEMS0aMVAOUT4WQRgAAO7yCEAQAbEACiZBqxZBkRAAEuse0R4R4YQBgOccgCoRQfkRgNgFwdADQAAPwACEMRcRRhxhzhHBxAggYA3hNBFh1hwR8AGAAAyrwXwB4TQUIbEYQG0RQfANgGQUYaoWwS4bIPEZ-vEUwEwOoC-pQC-uoAQVwQSUSSSQQYYSQQiSQcQDQFAOgXCV8TIfINgIQHgAAI7YAQCYkcHKFbEbEQkQDwA0GwHwGIH8mKEIkX5QFYAQBuFXE0Ecncm8nSmuHwEABeEACJV+kAMA6R9+PAehehqAAAzOaR-gQe-kAA)

## What did I learn?

In Part 1,
I initially used
[spread syntax (`...`)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax)
at the end of the reducer:

```js
// Initial
return [...locations, [x, y].toString()]

// Current
locations.push([x, y].toString())
return locations
```

I knew that the initial version must be slower
because on every iteration,
I'm creating a new array
and also iterating through `locations`
(which becomes larger after each iteration).
But what surprised me is that
the initial version
was about _100&times;_ slower!
Yes, a hundred times.

I tested both versions using `console.time()` and `console.timeEnd()`.
The current version took about 10ms,
and the initial version took about 1000ms!
Wow!

The performance differences are obviously dependent
on the device and the browser
and maybe other factors as well.
But my learning is that
**you'd better use the spread syntax carefully on large datasets**.
"Large" is relative,
but in Part 1,
the `visitedLocations` array contains 8,193 items in the end
(before removing duplicates).
